---
layout: post
title:  "RANSAC原理与实现"
date:   2017-10-28 17:40:41
categories: 机器学习
tags: 
mathjax: true
author: Narcissus
---

* content
{:toc}



## 原理
随机采样一致性（RANSAC）算法[40]根据一组包含异常数据的样本，估计出这组数据满足的数学模型参数；假设符合数学模型的那点称为局内点，而不符合数学模型的那些点被称为局外点。随机采样一致性通过反复的选择数据中的一组数据子集来达成目标，被选取的数据子集初始为局内点，并通过迭代求解最优结果。在模型确定情况下，以及最大迭代次数是允许的情况下，随机采样一致性算法总是能够找到最优解。

![笔记](quiver-image-url/D83FCE8D60B93DD3337E69F042024D1B.png)

![笔记1](quiver-image-url/FC388591AA16C50F6F6FCC5CE9CEC29B.png)


## 随机采样一致性算法的输入是

* 一组观测点，其中包含局内点与局外点；
* 提供一个可以由数据拟合的模型，含有未知参数；
* 判断为一个模型所需要的最小数据量；
* 算法的迭代的最大次数；
* 阈值，这个阈值限定什么时候数据点能够满足模型；邻近数据值得数量，用来判断模型是否能和数据进行很好的拟合。


## RANSAC的应用

**Calculate Homography**:
A homography can be computed when we have 4 or more corresponding points in two images. Automatic feature matching explained in the previous section does not always produce 100% accurate matches. It is not uncommon for 20-30% of the matches to be incorrect. Fortunately, the findHomography method utilizes a robust estimation technique called Random Sample Consensus (RANSAC) which produces the right result even in the presence of large number of bad matches.
```c++
// Extract location of good matches
 std::vector\<Point2f\> points1, points2;
 for( size\_t i = 0; i \< matches.size(); i++ )
 {
   points1.push\_back( keypoints1[ matches[i].queryIdx ].pt );
   points2.push\_back( keypoints2[ matches[i].trainIdx ].pt );
 }
 // Find homography
 h = findHomography( points1, points2, RANSAC );
```


与标准最小二乘法拟合直线比较：

![](quiver-image-url/2E669BCB074D1FCA0572858E7CF112D9.png)
RANSAC的实现: 采用最小二乘法来作为模型拟合群内点，并与未使用ransac的最小二乘法进行比较：
